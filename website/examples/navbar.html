<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>front.js - NavBar Example</title>
    <link rel="stylesheet" href="../styles.css" />
    <style>
      .content {
        padding: 6rem 2rem 2rem;
        /* Top padding for fixed navbar */
        max-width: 900px;
        margin: 0 auto;
      }

      .content h1 {
        margin-top: 0;
        color: var(--color-primary);
      }

      .content h2 {
        margin-top: 2rem;
        color: var(--color-text);
        border-bottom: 1px solid var(--color-border);
        padding-bottom: 0.5rem;
      }

      .content pre {
        background: var(--color-code-bg);
        color: var(--color-code-text);
        padding: 1rem;
        border-radius: var(--border-radius);
        overflow-x: auto;
        border: 1px solid var(--color-border);
      }

      .content code {
        background: var(--color-code-bg);
        color: var(--color-primary);
        padding: 0.2rem 0.4rem;
        border-radius: 4px;
        font-size: 0.9em;
      }

      .content pre code {
        background: transparent;
        padding: 0;
      }

      .content p {
        line-height: 1.6;
        margin: 1rem 0;
      }

      .content a {
        color: var(--color-primary);
        text-decoration: none;
        font-weight: 600;
      }

      .content a:hover {
        text-decoration: underline;
      }

      .layout-section {
        margin: 2rem 0;
        padding: 1.5rem;
        background: var(--color-bg-light);
        border: 1px solid var(--color-border);
        border-radius: var(--border-radius);
      }

      .layout-section h3 {
        margin-top: 0;
        color: var(--color-primary);
      }
    </style>
  </head>

  <body>
    <!-- NavBar Island -->
    <div
      data-island
      data-component="NavBar"
      data-props='{
      "links": [
        {"label": "Home", "url": "/"},
        {"label": "Examples", "url": "/examples/index.html"},
        {"label": "Docs", "url": "/KB/"},
        {"label": "GitHub", "url": "https://github.com/watthem/front-js"}
      ]
    }'
    ></div>

    <div class="content">
      <h1>NavBar Example</h1>
      <p>This is a responsive navigation bar component built with front.js.</p>
      <p><strong>Resize the window</strong> to see the mobile menu toggle in action.</p>

      <h2>How It Works</h2>
      <p>The NavBar component uses fine-grained reactivity to toggle the mobile menu. The state <code>isOpen</code> tracks whether the mobile menu is visible:</p>
      <pre><code>const isOpen = val(false);</code></pre>
      <p>When you click the hamburger button, <code>isOpen</code> toggles and the component automatically re-renders to show/hide the mobile menu.</p>

      <h2>Component Code</h2>
      <p>The NavBar component demonstrates several front.js patterns:</p>
      <pre><code>import { html } from 'uhtml';
import { val } from '../front.esm.js';

export function NavBar(props) {
  const isOpen = val(false);
  const links = props.links || [];

  return () => html`
    &lt;nav class="navbar"&gt;
      &lt;div class="navbar-container"&gt;
        &lt;a href="/" class="navbar-brand"&gt;front.js&lt;/a&gt;
        
        &lt;!-- Mobile toggle button --&gt;
        &lt;button 
          class="navbar-toggle" 
          onclick=\${() => isOpen(!isOpen())}
        &gt;
          &lt;span class="hamburger"&gt;&lt;/span&gt;
        &lt;/button&gt;

        &lt;!-- Desktop menu --&gt;
        &lt;div class="navbar-menu desktop"&gt;
          \${links.map(link => html`
            &lt;a href="\${link.url}" class="navbar-link"&gt;
              \${link.label}
            &lt;/a&gt;
          `)}
        &lt;/div&gt;
      &lt;/div&gt;

      &lt;!-- Mobile menu (conditionally visible) --&gt;
      &lt;div class="\${`navbar-mobile-menu \${isOpen() ? 'open' : ''}`}"&gt;
        \${links.map(link => html`
          &lt;a 
            href="\${link.url}" 
            class="navbar-link"
            onclick=\${() => setTimeout(() => isOpen(false), 50)}
          &gt;
            \${link.label}
          &lt;/a&gt;
        `)}
      &lt;/div&gt;
    &lt;/nav&gt;
  `;
}</code></pre>

      <h2>Usage - Server (HTML)</h2>
      <p>Mark the island with the component name and pass navigation links as props:</p>
      <pre><code>&lt;div
  data-island
  data-component="NavBar"
  data-props='{
    "links": [
      {"label": "Home", "url": "/"},
      {"label": "Examples", "url": "/examples/"},
      {"label": "Docs", "url": "/docs/"},
      {"label": "GitHub", "url": "https://github.com/watthem/front-js"}
    ]
  }'
&gt;&lt;/div&gt;</code></pre>

      <h2>Usage - Client (JavaScript)</h2>
      <p>Register the component and hydrate:</p>
      <pre><code>import { register, hydrate } from '../front.esm.js';
import { NavBar } from '../components/NavBar.js';

register('NavBar', NavBar);
hydrate();</code></pre>

      <div class="layout-section">
        <h3>üì± Mobile Layout (&lt; 768px)</h3>
        <p>On mobile devices, the navigation links collapse into a hamburger menu. The mobile menu slides down when the hamburger button is clicked.</p>
        <ul>
          <li>Hamburger button is visible</li>
          <li>Desktop menu is hidden</li>
          <li>Mobile menu appears below when <code>isOpen</code> is true</li>
          <li>Links auto-close the menu on click (with 50ms delay)</li>
        </ul>
      </div>

      <div class="layout-section">
        <h3>üíª Desktop Layout (‚â• 768px)</h3>
        <p>On desktop, the navigation links are displayed horizontally in the navbar.</p>
        <ul>
          <li>Hamburger button is hidden</li>
          <li>Desktop menu is visible</li>
          <li>Mobile menu is always hidden</li>
          <li>Links have hover effects</li>
        </ul>
      </div>

      <h2>Key Patterns</h2>
      <ul>
        <li><strong>Reactive State:</strong> <code>isOpen</code> uses <code>val()</code> for fine-grained reactivity</li>
        <li><strong>Conditional Classes:</strong> Template strings dynamically add/remove the <code>open</code> class</li>
        <li><strong>Event Handlers:</strong> Inline arrow functions toggle state on user interaction</li>
        <li><strong>Responsive Design:</strong> CSS media queries control which layout is visible</li>
        <li><strong>Server-Rendered HTML:</strong> The navbar can be pre-rendered with matching props for zero pop-in</li>
      </ul>

      <p style="margin-top: 3rem;">
        <a href="index.html">‚Üê Back to Examples</a>
      </p>
    </div>

    <script type="importmap">
      {
        "imports": {
          "uhtml": "https://esm.sh/uhtml@4.5.11"
        }
      }
    </script>

    <script type="module">
      import { register, hydrate } from '../front.esm.js';
      import { NavBar } from '../components/NavBar.js';

      register('NavBar', NavBar);
      hydrate();
    </script>
  </body>
</html>
